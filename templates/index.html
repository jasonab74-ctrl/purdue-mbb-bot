<!-- templates/index.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Purdue MBB — All Sources</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='thumbs.css') }}">
</head>
<body>
  <header class="header">
    <div class="brand">
      <span class="brand-mark">⬢</span>
      <h1>Purdue Men’s Basketball Hub</h1>
    </div>
    <audio controls class="fight-song" preload="none">
      <source src="{{ url_for('static', filename='fight_song.mp3') }}" type="audio/mpeg">
    </audio>
  </header>

  <main class="container">
    <!-- Your quick links chips (unchanged) -->
    <section class="chips">
      <a class="chip" href="https://www.espn.com/mens-college-basketball/team/_/id/2509/purdue-boilermakers" target="_blank" rel="noopener">ESPN – Purdue MBB</a>
      <a class="chip" href="https://www.cbssports.com/college-basketball/teams/PUR/purdue-boilermakers/" target="_blank" rel="noopener">CBS – Purdue MBB</a>
      <a class="chip" href="https://www.hammerandrails.com/" target="_blank" rel="noopener">Hammer & Rails</a>
      <a class="chip" href="https://goldandblack.com/" target="_blank" rel="noopener">GoldandBlack</a>
      <a class="chip" href="https://www.barstoolsports.com/tag/purdue" target="_blank" rel="noopener">Barstool – Purdue</a>
      <a class="chip" href="https://purduesports.com/sports/mens-basketball/schedule" target="_blank" rel="noopener">Purdue – Schedule</a>
      <a class="chip" href="https://purduesports.com/sports/mens-basketball/roster" target="_blank" rel="noopener">Purdue – Roster</a>
      <a class="chip" href="https://www.reddit.com/r/Boilermakers/" target="_blank" rel="noopener">Reddit – r/Boilermakers</a>
      <a class="chip" href="https://www.youtube.com/@TheFieldOf68" target="_blank" rel="noopener">YouTube – Field of 68</a>
      <a class="chip" href="https://www.youtube.com/@SleepersMedia" target="_blank" rel="noopener">YouTube – Sleepers Media</a>
    </section>

    <!-- Feed -->
    <section class="feed">
      {% if items and items|length > 0 %}
        {% for item in items %}
          {% set thumb = (item.get('image') or item.get('image_url') or item.get('media_image') or item.get('thumbnail') or (item.get('link')|yt_thumb)) %}
          <article class="card card--article">
            {% if thumb %}
              <img class="card-thumb" src="{{ thumb }}" alt="" loading="lazy" referrerpolicy="no-referrer">
            {% else %}
              <img class="card-thumb" src="{{ url_for('static', filename='ball.svg') }}" alt="" loading="lazy">
            {% endif %}

            <div class="card-body">
              <div class="card-meta">
                {% if item.get('source') %}
                  <span class="badge">{{ item['source'] }}</span>
                {% endif %}
                {% if item.get('_published_human') %}
                  <time class="date">{{ item['_published_human'] }}</time>
                {% endif %}
              </div>

              <a class="card-title" href="{{ item['link'] }}" target="_blank" rel="noopener">
                {{ item['title'] }}
              </a>

              {% if item.get('summary') %}
                <p class="card-snippet">{{ item['summary'] }}</p>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      {% else %}
        <p class="empty">No items yet. Check back soon.</p>
      {% endif %}
    </section>
  </main>

  <footer class="footer">
    <small>Unofficial fan aggregation. Purdue © their owners.</small>
  </footer>
</body>
</html>
